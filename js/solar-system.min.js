!function(t){"use strict";function i(t){var n={color:$(t).attr("COLOR"),name:$(t).find("> NAME").text(),distance:$(t).find("> DISTANCE").text(),radius:$(t).find("> RADIUS").text(),length_of_year:$(t).find("> LENGTH_OF_YEAR").text(),day:$(t).find("> DAY").text(),mass:$(t).find("> MASS").text(),density:$(t).find("> DENSITY").text(),satellites:d($(t).find("> SATELLITES").children())};r.push(n)}function d(t){if(t.length){for(var n=[],e=0,a=t.length;a>e;e++)n.push({name:$(t[e]).find("> NAME").text(),distance_from_planet:$(t[e]).find("> DISTANCE_FROM_PLANET").text(),orbit:$(t[e]).find("> ORBIT").text()});return n}return null}function f(t){t=""+t.toLowerCase();var e,a,n=["of","a","to"];if(t)if(parseInt(t)==t){if(parseInt(t)>=1e4){for(t=t.split(""),e=t.length-1;e>=0;e-=3)e<t.length-1&&(t[e]=t[e]+",");t=t.join("")}}else{for(t=t.split(""),t[0]=t[0].toUpperCase(),e=0,a=t.length;a>e;e++)"_"==t[e]&&(t[e]=" ",t[e+1]&&(t[e+1]=t[e+1].toUpperCase()));for(t=t.join(""),e=0,a=n.length;a>e;e++){var r=new RegExp(n[e],"gi");t=t.replace(r,n[e])}}return t}function o(t){var n=$("<table></table>");for(var e in t){var a=t[e];switch(typeof t[e]){case"string":e=f(e);var r=$("<tr></tr>").append($("<td></td>").text(e)).append($("<td></td>").text(f(a)));$(n).append(r);break;default:if(a&&a.length)for(var i in a)console.log(i,a[i])}}return n}function l(t){$.ajax({url:"res/planets.xml",method:"get",dataType:"xml",success:function(n){for(var a=$(n).find("SOLAR_SYSTEM > PLANETS").children(),d=0,f=a.length;f>d;i(a[d++]));e.loaded=!0,"function"==typeof t&&t(r)}})}function s(t){return $("<figure></figure>").addClass("planet").css({background:t.color}).data("planet",t).append($("<figcaption></figcaption>").append($("<h1></h1>").text(t.name)).append(o(t)))}function u(){a=[],r=[],e.loaded=!1}var e={loaded:!1},a=[],r=[];t.load=function(t){e.loaded&&u(),l(t)},t.createPlanet=function(t){return s(t)}}(window.solar=window.solar||{});