!function(t){"use strict";function l(t){var e=t.pageX,i=t.pageY;$(o).stop().animate({top:i,left:e,opacity:1},250)}function s(){$(o).stop().animate({opacity:0},250)}function c(){this.animate({opacity:.3},100)}function h(){this.animate({opacity:.2},100)}function d(t){n=new Raphael(t,i,r);var e,l,s;e=n.width,l=n.height,s=n.setViewBox(0,0,n.width,n.height),s.X=0,s.Y=0,window.addEventListener("wheel",function(t){var i=t.wheelDelta/120;if(a+=i,-10>a||a>10)return void(a-=i);var r=e,o=l,c=i>0?.9:1.1;e*=c,l*=c,s.X-=(e-r)/2,s.Y-=(l-o)/2,n.setViewBox(s.X,s.Y,e,l)}),document.addEventListener("mousedown",function(t){1===t.button&&t.preventDefault()}),o=document.createElement("div"),o.id="tooltip",document.body.appendChild(o)}function v(){for(var e=t.planets.length;e--;){var i=t.planets[e];i.orbit.progress+=i.orbit_time_step;var r=i.orbit.length/(100/i.orbit.progress);r>=i.orbit.length&&(i.orbit.progress=0);var a=i.orbit.getPointAtLength(r);if(i.set.animate({cx:a.x,cy:a.y},100),i.satellites)for(var n=i.satellites.length;n--;){var o=i.satellites[n];o.orbit.progress+=2;var l=o.orbit.length/(100/o.orbit.progress);l>=o.orbit.length&&(o.orbit.progress=0);var s=o.orbit.getPointAtLength(l);o.circle.animate({cx:s.x,cy:s.y},100),o.orbit.animate({cx:a.x,cy:a.y})}}}function p(){var e=25;n.circle(i/2,r/2,e).attr({fill:"#ff9900","stroke-width":0}).noclick().glow({color:"#ff9900",width:50});var a,o,d={distance:0,radius:0};for(o=t.planets.length;o--;)a=t.planets[o],a.distance>d.distance&&(d.distance=a.distance),a.radius>d.radius&&(d.radius=a.radius);for(o=t.planets.length;o--;){a=t.planets[o],console.log(a.name,a.orbit_time_step);var p=a.radius/d.radius*r/50+2;p=a.radius/5e3;var u=a.distance/10;a.orbit=n.ellipse(i/2,r/2,u,u).attr({fill:"#5a4479","stroke-width":0,opacity:.2}).hover(c,h),a.orbit.length=a.orbit.getTotalLength();var f=a.orbit.length*Math.random(),w=a.orbit.getPointAtLength(f),g=Math.max(1.2*p,10),b=n.circle(w.x,w.y,g).attr({fill:a.color,"stroke-width":0,opacity:.2});if(a.circle=n.circle(w.x,w.y,p).attr({fill:a.color,"stroke-width":0}).toFront().noclick(),b.hover(l,s,a.circle),a.orbit.progress=f,a.orbit.toBack(),a.circle.planet=a,a.set=n.set(),a.satellites)for(var m=a.satellites.length;m--;){var y=a.satellites[m],k=p*y.distance_from_planet/1e5;k=Math.max(k,5*p),k=Math.min(k,2.5*p),y.orbit=n.circle(w.x,w.y,k).attr({opacity:.05,stroke:"#000","stroke-width":1}).toBack().noclick(),y.orbit.length=y.orbit.getTotalLength();var x=y.orbit.length*Math.random(),L=y.orbit.getPointAtLength(x);y.orbit.progress=x,y.circle=n.circle(L.x,L.y,.25*p).attr({"stroke-width":0,fill:"#333"}).noclick()}a.set.push(a.circle),a.set.push(b)}window.setInterval(v,100)}var i=window.innerWidth,r=window.innerHeight,a=0,n=null,o=null;Raphael.el.noclick=function(){return this.node.setAttribute("pointer-events","none"),this},t.loadGui=function(e){console.log(e),t.status.loaded&&(d(e),p())}}(window.solar=window.solar||{});