!function(t){"use strict";function l(t){var i=t.pageX,e=t.pageY;$(n).stop().animate({top:e,left:i,opacity:1},250)}function s(){$(n).stop().animate({opacity:0},250)}function c(){this.animate({opacity:.3},100)}function d(){this.animate({opacity:.2},100)}function h(t){r=new Raphael(t,e,a);var i,l,s;i=r.width,l=r.height,s=r.setViewBox(0,0,r.width,r.height),s.X=0,s.Y=0,window.addEventListener("wheel",function(t){var e=t.wheelDelta/120;if(o+=e,-10>o||o>10)return void(o-=e);var a=i,n=l,c=e>0?.9:1.1;i*=c,l*=c,s.X-=(i-a)/2,s.Y-=(l-n)/2,r.setViewBox(s.X,s.Y,i,l)}),document.addEventListener("mousedown",function(t){1===t.button&&t.preventDefault()}),n=document.createElement("div"),n.id="tooltip",document.body.appendChild(n)}function f(){for(var i=t.planets.length;i--;){var e=t.planets[i];e.orbit.progress+=e.orbit_time_step;var a=e.orbit.length/(100/e.orbit.progress);a>=e.orbit.length&&(e.orbit.progress=0);var o=e.orbit.getPointAtLength(a);e.set.animate({cx:o.x,cy:o.y},100)}}function p(){var i=25;r.circle(e/2,a/2,i).attr({fill:"#ff9900","stroke-width":0}).noclick().glow({color:"#ff9900",width:50});var o,n,h={distance:0,radius:0};for(n=t.planets.length;n--;)o=t.planets[n],o.distance>h.distance&&(h.distance=o.distance),o.radius>h.radius&&(h.radius=o.radius);for(n=t.planets.length;n--;){o=t.planets[n];var p=o.distance/h.distance*e/16,u=o.radius/h.radius*a/50+2;o.orbit=r.ellipse(e/2,a/2,e/p,a/p).attr({fill:"#5a4479","stroke-width":0,opacity:.2}).hover(c,d),o.orbit.length=o.orbit.getTotalLength();var v=o.orbit.length*Math.random(),w=o.orbit.getPointAtLength(v),g=Math.max(1.2*u,10),b=r.circle(w.x,w.y,g).attr({fill:o.color,"stroke-width":0,opacity:.2});o.circle=r.circle(w.x,w.y,u).attr({fill:o.color,"stroke-width":0}).toFront(),b.hover(l,s,o.circle),o.circle.hover(l,s),o.orbit.progress=v,o.orbit.toBack(),o.set=r.set(),o.set.push(o.circle,b),o.circle.planet=o}window.setInterval(f,100)}var e=window.innerWidth,a=window.innerHeight,o=0,r=null,n=null;Raphael.el.noclick=function(){return this.node.setAttribute("pointer-events","none"),this},t.loadGui=function(i){console.log(i),t.status.loaded&&(h(i),p())}}(window.solar=window.solar||{});