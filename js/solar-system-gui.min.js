!function(t){"use strict";function c(t){clearInterval(s);var e=t.pageX,r=t.pageY;$(l).stop().animate({top:r,left:e,opacity:1},i),l.innerHTML=d(this.planet)}function h(){$(l).stop().animate({opacity:0},i),s=window.setInterval(f,i)}function d(t){var e=$("<div></div>").append($("<h1></h1>").text(t.name)),i=$("<div></div>").addClass("planet-table-container"),r=$("<table></table>");return r.append(p("Day",t.day.natural+" <small>Earth hours</small>")),r.append(p("Year",t.length_of_year.natural+" <small>Earth years</small>")),r.append(p("Mass",t.mass.natural+" <small>times that of Earth</small>")),r.append(p("Distance",t.distance.natural+" <small>million km</small>")),r.append(p("Radius","~"+t.radius.natural+" <small>km</small>")),i.append(r),e.append(i),e.html()}function p(t,e){return $("<tr></tr>").append($("<td></td>").text(t)).append($("<td></td>").html(e))}function v(){this.animate({opacity:.3},i)}function g(){this.animate({opacity:.2},i)}function u(t){o=new Raphael(t,r,a);var e,i,s;e=o.width,i=o.height,s=o.setViewBox(0,0,o.width,o.height),s.X=0,s.Y=0,t.addEventListener("wheel",function(t){console.log(t);var r=t.wheelDelta/120;if(n+=r,-10>n||n>10)return void(n-=r);var a=e,l=i,c=r>0?.9:1.1;e*=c,i*=c,s.X-=(e-a)/2,s.Y-=(i-l)/2,o.setViewBox(s.X,s.Y,e,i)}),l=document.createElement("div"),l.id="tooltip",document.body.appendChild(l)}function f(){for(var e=t.planets.length;e--;){var r=t.planets[e];r.orbit.progress+=r.orbit_time_step;var a=r.orbit.length/(100/r.orbit.progress);a>=r.orbit.length&&(r.orbit.progress=0);var n=r.orbit.getPointAtLength(a);if(r.set.animate({cx:n.x,cy:n.y},i),r.satellites)for(var o=r.satellites.length;o--;){var l=r.satellites[o];l.orbit.progress+=2;var s=l.orbit.length/(100/l.orbit.progress);s>=l.orbit.length&&(l.orbit.progress=0);var c=l.orbit.getPointAtLength(s);l.circle.animate({cx:c.x,cy:c.y},i),l.orbit.animate({cx:n.x,cy:n.y},i)}}}function w(){var e=25;o.circle(r/2,a/2,e).attr({fill:"#ff9900","stroke-width":0}).noclick().glow({color:"#ff9900",width:50});var n,l,d={distance:0,radius:0};for(l=t.planets.length;l--;)n=t.planets[l],n.distance>d.distance&&(d.distance=n.distance),n.radius>d.radius&&(d.radius=n.radius);for(l=t.planets.length;l--;){n=t.planets[l];var p=n.radius/d.radius*a/50+2;p=n.radius/5e3;var u=n.distance/10+1.5*e;n.orbit=o.ellipse(r/2,a/2,u,u).attr({fill:"#5a4479","stroke-width":0,opacity:.2}).hover(v,g),n.orbit.length=n.orbit.getTotalLength();var w=n.orbit.length*l/t.planets.length,b=n.orbit.getPointAtLength(w),m=Math.max(1.2*p,10),y=o.circle(b.x,b.y,m).attr({fill:n.color,"stroke-width":0,opacity:.2});if(n.circle=o.circle(b.x,b.y,p).attr({fill:n.color,"stroke-width":0}).toFront().noclick(),y.hover(c,h,n.circle),n.orbit.progress=w,n.orbit.toBack(),n.circle.planet=n,n.set=o.set(),n.satellites)for(var x=n.satellites.length;x--;){var k=n.satellites[x],L=p*k.distance_from_planet/1e5;L=Math.max(L,5*p),L=Math.min(L,2.5*p),k.orbit=o.circle(b.x,b.y,L).attr({opacity:.05,stroke:"#000","stroke-width":1}).noclick(),k.orbit.length=k.orbit.getTotalLength();var $=k.orbit.length*Math.random(),M=k.orbit.getPointAtLength($);k.orbit.progress=$,k.circle=o.circle(M.x,M.y,.25*p).attr({"stroke-width":0,fill:"#777"}).noclick()}n.set.push(n.circle),n.set.push(y)}s=window.setInterval(f,i)}var i=400,r=window.innerWidth,a=window.innerHeight,n=0,o=null,l=null,s=null;Raphael.el.noclick=function(){return this.node.setAttribute("pointer-events","none"),this},t.loadGui=function(e){console.log(e),t.status.loaded&&(u(e),w())},t.planetTable=function(t){return d(t)}}(window.solar=window.solar||{});